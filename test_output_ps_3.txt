cargo : warning: unused variable: `storage_builder`
At line:1 char:51
+ ... TH = 'C:\Program Files\LLVM\bin'; cargo test --workspace 2>&1 | Out-F ...
+                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (warning: unused...torage_builder`:String) [], R 
   emoteException
    + FullyQualifiedErrorId : NativeCommandError
 
   --> crates\crucible-core\src\parser\storage_bridge.rs:274:9
    |
274 |         storage_builder: &ContentAddressedStorageBuilder,
    |         ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_storage_builder`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: `crucible-core` (lib) generated 1 warning
warning: unused variable: `idx`
   --> crates\crucible-pipeline\src\note_pipeline.rs:228:14
    |
228 |         for (idx, section) in diff.changed_sections.iter().enumerate() {
    |              ^^^ help: if this is intentional, prefix it with an underscore: `_idx`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: `crucible-pipeline` (lib) generated 1 warning
warning: unused import: `sanitize_record_id`
  --> crates\crucible-surrealdb\src\kiln_integration.rs:15:48
   |
15 | use crate::utils::{resolve_and_normalize_path, sanitize_record_id};
   |                                                ^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` on by default

warning: unused import: `RecordId`
  --> crates\crucible-surrealdb\src\merkle_persistence.rs:15:32
   |
15 | use crate::{DbError, DbResult, RecordId, SurrealClient};
   |                                ^^^^^^^^

warning: unused import: `crucible_core::parser::ParsedNote`
  --> crates\crucible-surrealdb\src\merkle_persistence.rs:17:5
   |
17 | use crucible_core::parser::ParsedNote;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crucible_enrichment::{
         }`
  --> crates\crucible-surrealdb\src\lib.rs:97:9
   |
97 |   pub use crucible_enrichment::{
   |  _________^
98 | | };
   | |_^

warning: value assigned to `last_error` is never read
   --> crates\crucible-surrealdb\src\transaction_consumer.rs:495:17
    |
495 |         let mut last_error = None;
    |                 ^^^^^^^^^^
    |
    = help: maybe it is overwritten before being read?
    = note: `#[warn(unused_assignments)]` on by default

warning: value assigned to `last_error` is never read
   --> crates\crucible-surrealdb\src\transaction_consumer.rs:765:21
    |
765 |             let mut last_error = None;
    |                     ^^^^^^^^^^
    |
    = help: maybe it is overwritten before being read?

warning: unused import: `crucible_core::merkle::MerkleStore`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:1057:17
     |
1057 |             use crucible_core::merkle::MerkleStore;
     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: method `merge_state_with_pending` is never used
   --> crates\crucible-surrealdb\src\batch_aware_client.rs:118:14
    |
 87 | impl BatchAwareSurrealClient {
    | ---------------------------- method in this implementation
...
118 |     async fn merge_state_with_pending(
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = note: `#[warn(dead_code)]` on by default

warning: methods `add_embed_variant_metadata`, `get_render_hints`, 
`extract_external_url_metadata`, and `extract_youtube_video_id` are never used
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:692:8
     |
 134 | impl<'a> NoteIngestor<'a> {
     | ------------------------- methods in this implementation
...
 692 |     fn add_embed_variant_metadata(
     |        ^^^^^^^^^^^^^^^^^^^^^^^^^^
...
 882 |     fn get_render_hints(&self, wikilink: &crucible_core::parser::Wikilink) -> serde...
     |        ^^^^^^^^^^^^^^^^
...
1970 |     fn extract_external_url_metadata(
     |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
2046 |     fn extract_youtube_video_id(&self, url: &str) -> Option<String> {
     |        ^^^^^^^^^^^^^^^^^^^^^^^^

warning: function `entity_record_id` is never used
  --> crates\crucible-surrealdb\src\hash_lookup.rs:62:4
   |
62 | fn entity_record_id(relative_path: &str) -> String {
   |    ^^^^^^^^^^^^^^^^

warning: function `ensure_tag_exists` is never used
   --> crates\crucible-surrealdb\src\kiln_integration.rs:795:10
    |
795 | async fn ensure_tag_exists(client: &SurrealClient, tag_name: &str) -> Result<()> {
    |          ^^^^^^^^^^^^^^^^^

warning: function `normalize_tag_name` is never used
   --> crates\crucible-surrealdb\src\kiln_integration.rs:810:4
    |
810 | fn normalize_tag_name(tag: &str) -> String {
    |    ^^^^^^^^^^^^^^^^^^

warning: field `received_at` is never read
   --> crates\crucible-surrealdb\src\transaction_consumer.rs:144:5
    |
141 | struct BatchableTransaction {
    |        -------------------- field in this struct
...
144 |     received_at: Instant,
    |     ^^^^^^^^^^^
    |
    = note: `BatchableTransaction` has a derived impl for the trait `Debug`, but this is 
intentionally ignored during dead code analysis

warning: field `config` is never read
   --> crates\crucible-surrealdb\src\transaction_queue.rs:262:5
    |
254 | pub struct TransactionQueue {
    |            ---------------- field in this struct
...
262 |     config: TransactionQueueConfig,
    |     ^^^^^^

warning: creating a shared reference to mutable static
   --> crates\crucible-surrealdb\src\metrics.rs:443:9
    |
443 |         GLOBAL_METRICS.as_ref().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^ shared reference to mutable static
    |
    = note: for more information, see 
<https://doc.rust-lang.org/edition-guide/rust-2024/static-mut-references.html>
    = note: shared references to mutable statics are dangerous; it's undefined behavior if 
the static is mutated or if a mutable reference is created for it while the shared reference 
lives
    = note: `#[warn(static_mut_refs)]` on by default

warning: `crucible-surrealdb` (lib) generated 15 warnings (run `cargo fix --lib -p 
crucible-surrealdb` to apply 4 suggestions)
warning: unused import: `std::path::Path`
 --> crates\crucible-cli\src\acp\client.rs:6:5
  |
6 | use std::path::Path;
  |     ^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

warning: unused imports: `ChildStdin` and `ChildStdout`
 --> crates\crucible-cli\src\acp\client.rs:9:29
  |
9 | use tokio::process::{Child, ChildStdin, ChildStdout, Command};
  |                             ^^^^^^^^^^  ^^^^^^^^^^^

warning: unused imports: `error` and `warn`
  --> crates\crucible-cli\src\acp\client.rs:11:22
   |
11 | use tracing::{debug, error, info, warn};
   |                      ^^^^^        ^^^^

warning: unused import: `error`
 --> crates\crucible-cli\src\commands\chat.rs:8:15
  |
8 | use tracing::{error, info};
  |               ^^^^^

warning: unused variable: `core`
   --> crates\crucible-cli\src\commands\chat.rs:123:5
    |
123 |     core: Arc<CrucibleCoreFacade>,
    |     ^^^^ help: if this is intentional, prefix it with an underscore: `_core`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: unused variable: `client`
   --> crates\crucible-cli\src\commands\chat.rs:124:5
    |
124 |     client: &CrucibleAcpClient,
    |     ^^^^^^ help: if this is intentional, prefix it with an underscore: `_client`

warning: unused variable: `no_context`
   --> crates\crucible-cli\src\commands\chat.rs:126:5
    |
126 |     no_context: bool,
    |     ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_no_context`

warning: unused variable: `context_size`
   --> crates\crucible-cli\src\commands\chat.rs:127:5
    |
127 |     context_size: Option<usize>,
    |     ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_context_size`

warning: variable does not need to be mutable
   --> crates\crucible-cli\src\commands\chat.rs:131:9
    |
131 |     let mut current_mode = initial_mode;
    |         ----^^^^^^^^^^^^
    |         |
    |         help: remove this `mut`
    |
    = note: `#[warn(unused_mut)]` on by default

warning: unused variable: `format`
   --> crates\crucible-cli\src\commands\storage.rs:335:5
    |
335 |     format: String,
    |     ^^^^^^ help: if this is intentional, prefix it with an underscore: `_format`

warning: unused variable: `backup_data`
   --> crates\crucible-cli\src\commands\storage.rs:350:9
    |
350 |     let backup_data: serde_json::Value =
    |         ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_backup_data`

warning: unused variable: `storage`
   --> crates\crucible-cli\src\commands\storage.rs:359:9
    |
359 |     let storage = create_storage_backend(&config)?;
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_storage`

warning: unused variable: `storage`
   --> crates\crucible-cli\src\commands\storage.rs:397:5
    |
397 |     storage: &Arc<dyn ContentAddressedStorage>,
    |     ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_storage`

warning: unused variable: `storage`
   --> crates\crucible-cli\src\commands\storage.rs:413:5
    |
413 |     storage: &Arc<dyn ContentAddressedStorage>,
    |     ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_storage`

warning: unused variable: `storage`
   --> crates\crucible-cli\src\commands\storage.rs:421:5
    |
421 |     storage: &Arc<dyn ContentAddressedStorage>,
    |     ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_storage`

warning: unused variable: `show_unchanged`
   --> crates\crucible-cli\src\commands\diff.rs:195:56
    |
195 | fn output_plain_format(changes: &[EnhancedTreeChange], show_unchanged: bool) {
    |                                                        ^^^^^^^^^^^^^^ help: if this is 
intentional, prefix it with an underscore: `_show_unchanged`

warning: unused variable: `show_unchanged`
   --> crates\crucible-cli\src\commands\diff.rs:323:5
    |
323 |     show_unchanged: bool,
    |     ^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_show_unchanged`

warning: unused variable: `by_backend`
   --> crates\crucible-cli\src\commands\storage.rs:430:45
    |
430 | ..._table(stats: &StorageStats, by_backend: bool, deduplication: bool) -> Result<()> {
    |                                 ^^^^^^^^^^ help: if this is intentional, prefix it 
with an underscore: `_by_backend`

warning: unused variable: `deduplication`
   --> crates\crucible-cli\src\commands\storage.rs:430:63
    |
430 | ...geStats, by_backend: bool, deduplication: bool) -> Result<()> {
    |                               ^^^^^^^^^^^^^ help: if this is intentional, prefix it 
with an underscore: `_deduplication`

warning: function `print_enriched_prompt` is never used
   --> crates\crucible-cli\src\commands\chat.rs:170:4
    |
170 | fn print_enriched_prompt(prompt: &str) {
    |    ^^^^^^^^^^^^^^^^^^^^^
    |
    = note: `#[warn(dead_code)]` on by default

warning: function `format_bytes` is never used
   --> crates\crucible-cli\src\commands\diff.rs:439:4
    |
439 | fn format_bytes(bytes: u64) -> String {
    |    ^^^^^^^^^^^^

warning: function `extract_snippet` is never used
   --> crates\crucible-cli\src\commands\search.rs:515:4
    |
515 | fn extract_snippet(content: &str, query: &str, include_full: bool) -> String {
    |    ^^^^^^^^^^^^^^^

warning: function `calculate_relevance_score` is never used
   --> crates\crucible-cli\src\commands\search.rs:544:4
    |
544 | fn calculate_relevance_score(content: &str, query_lower: &str) -> f64 {
    |    ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: `crucible-cli` (lib) generated 23 warnings (run `cargo fix --lib -p crucible-cli` 
to apply 5 suggestions)
   Compiling crucible-watch v0.1.0 
(C:\Users\Matthew\Documents\crucible\crates\crucible-watch)
   Compiling crucible-cli v0.1.0 (C:\Users\Matthew\Documents\crucible\crates\crucible-cli)
   Compiling crucible-surrealdb v0.1.0 
(C:\Users\Matthew\Documents\crucible\crates\crucible-surrealdb)
warning: unused import: `Level`
 --> crates\crucible-cli\src\main.rs:4:41
  |
4 | use tracing::{debug, error, info, warn, Level};
  |                                         ^^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

warning: unused import: `types::hashing::HashAlgorithm`
  --> crates\crucible-cli\src\main.rs:10:21
   |
10 | use crucible_core::{types::hashing::HashAlgorithm, CrucibleCore};
   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused variable: `timeout_err`
  --> crates\crucible-cli\src\main.rs:95:25
   |
95 |                     Err(timeout_err) => {
   |                         ^^^^^^^^^^^ help: if this is intentional, prefix it with an 
underscore: `_timeout_err`
   |
   = note: `#[warn(unused_variables)]` on by default

warning: `crucible-cli` (bin "cru" test) generated 3 warnings (run `cargo fix --bin "cru" 
--tests` to apply 2 suggestions)
warning: unused variable: `storage`
    --> crates\crucible-surrealdb\src\content_addressed_storage.rs:1511:13
     |
1511 |         let storage = create_test_storage().await;
     |             ^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_storage`
     |
     = note: `#[warn(unused_variables)]` on by default

warning: unused variable: `entity_id`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:2970:13
     |
2970 |         let entity_id = ingestor.ingest(&doc, "notes/test-tags.md").await.unwrap();
     |             ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_entity_id`

warning: unused variable: `expected_type`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:4935:26
     |
4935 |         for (i, (target, expected_type, _ext)) in embed_types.iter().enumerate() {
     |                          ^^^^^^^^^^^^^ help: if this is intentional, prefix it with 
an underscore: `_expected_type`

warning: unused variable: `expected_type`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:5400:26
     |
5400 |         for (i, (target, expected_type, expected_metadata)) in content_cases.iter()...
     |                          ^^^^^^^^^^^^^ help: if this is intentional, prefix it with 
an underscore: `_expected_type`

warning: unused variable: `expected_metadata`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:5400:41
     |
5400 | ... (target, expected_type, expected_metadata)) in content_cases.iter().enumerate() {
     |                             ^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it 
with an underscore: `_expected_metadata`

warning: unused variable: `expected_embed_type`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:5816:23
     |
5816 |         for (i, (url, expected_embed_type, is_external)) in test_cases.iter().enume...
     |                       ^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it 
with an underscore: `_expected_embed_type`

warning: unused variable: `is_external`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:5816:44
     |
5816 | ...(url, expected_embed_type, is_external)) in test_cases.iter().enumerate() {
     |                               ^^^^^^^^^^^ help: if this is intentional, prefix it 
with an underscore: `_is_external`

warning: unused variable: `expected_embed_type`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:5962:26
     |
5962 |         for (i, (target, expected_embed_type)) in metadata_test_cases.iter().enumer...
     |                          ^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it 
with an underscore: `_expected_embed_type`

warning: unused variable: `expected_embed_type`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:6080:28
     |
6080 |         for (i, (filename, expected_embed_type)) in case_test_cases.iter().enumerat...
     |                            ^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix 
it with an underscore: `_expected_embed_type`

warning: unused variable: `expected_embed_type`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:6582:38
     |
6582 |             let (alias, heading_ref, expected_embed_type) = if i < 5 {
     |                                      ^^^^^^^^^^^^^^^^^^^ help: if this is 
intentional, prefix it with an underscore: `_expected_embed_type`

warning: unused variable: `expected_embed_type_or_alias`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:6626:26
     |
6626 | ...    for (i, (target, expected_embed_type_or_alias)) in unicode_test_cases.iter()...
     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, 
prefix it with an underscore: `_expected_embed_type_or_alias`

warning: unused variable: `expected_embed_type`
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:6801:26
     |
6801 |         for (i, (target, expected_embed_type)) in edge_case_test_cases.iter().enume...
     |                          ^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it 
with an underscore: `_expected_embed_type`

warning: unused variable: `entity_id`
   --> crates\crucible-surrealdb\src\eav_graph\relation_tag_edge_case_tests.rs:433:13
    |
433 |         let entity_id = ingestor.ingest(&doc, "test.md").await.unwrap();
    |             ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_entity_id`

warning: unused variable: `entity_id1`
   --> crates\crucible-surrealdb\src\eav_graph\relation_tag_edge_case_tests.rs:482:13
    |
482 |         let entity_id1 = ingestor.ingest(&doc1, "doc1.md").await.unwrap();
    |             ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_entity_id1`

warning: unused variable: `entity_id2`
   --> crates\crucible-surrealdb\src\eav_graph\relation_tag_edge_case_tests.rs:484:13
    |
484 |         let entity_id2 = ingestor.ingest(&doc2, "doc2.md").await.unwrap();
    |             ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_entity_id2`

warning: unused variable: `entity1`
   --> crates\crucible-surrealdb\src\eav_graph\relation_tag_edge_case_tests.rs:620:13
    |
620 |         let entity1 = ingestor.ingest(&doc1, "doc1.md").await.unwrap();
    |             ^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_entity1`

warning: unused variable: `doc_id`
    --> crates\crucible-surrealdb\src\kiln_integration.rs:2283:13
     |
2283 |         let doc_id = store_parsed_document(&client, &doc, &kiln_root)
     |             ^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_doc_id`

warning: unused variable: `results`
   --> crates\crucible-surrealdb\src\query.rs:717:13
    |
717 |         let results = execute_query(&db, query).await.unwrap();
    |             ^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_results`

warning: unused variable: `result_receiver`
   --> crates\crucible-surrealdb\src\transaction_queue.rs:457:13
    |
457 |         let result_receiver = queue.enqueue(transaction).await.unwrap();
    |             ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an 
underscore: `_result_receiver`

warning: using `.clone()` on a double reference, which returns `&str` instead of cloning the 
inner type
    --> crates\crucible-surrealdb\src\eav_graph\ingest.rs:5846:55
     |
5846 | ...   .map(|(url, embed_type, is_external)| (url.clone(), (*embed_type, *is_externa...
     |                                                 ^^^^^^^^
     |
     = note: `#[warn(suspicious_double_ref_op)]` on by default

warning: `crucible-cli` (bin "cru") generated 3 warnings (3 duplicates)
warning: `crucible-surrealdb` (lib test) generated 35 warnings (15 duplicates)
warning: unused variable: `updates`
   --> crates\crucible-sync\src\note.rs:178:13
    |
178 |         let updates = doc1.get_updates_since(sv.clone()).await.unwrap();
    |             ^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_updates`
    |
    = note: `#[warn(unused_variables)]` on by default

   Compiling crucible-tools v0.1.0 
(C:\Users\Matthew\Documents\crucible\crates\crucible-tools)
warning: unused import: `HashAlgorithm`
  --> crates\crucible-core\examples\content_hasher_demo.rs:22:46
   |
22 |     types::hashing::{FileHash, FileHashInfo, HashAlgorithm, HashError},
   |                                              ^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` on by default

warning: unused variable: `stored`
   --> crates\crucible-core\examples\content_hasher_demo.rs:225:21
    |
225 |         if let Some(stored) = lookup_result.found_files.get(path) {
    |                     ^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_stored`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: unused import: `StorageManagement`
  --> crates\crucible-core\examples\test_mocks_demo.rs:12:55
   |
12 | use crucible_core::storage::traits::{BlockOperations, StorageManagement};
   |                                                       ^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` on by default

warning: `crucible-sync` (lib test) generated 1 warning
warning: `crucible-core` (example "content_hasher_demo") generated 2 warnings (run `cargo 
fix --example "content_hasher_demo"` to apply 1 suggestion)
warning: `crucible-core` (example "test_mocks_demo") generated 1 warning (run `cargo fix 
--example "test_mocks_demo"` to apply 1 suggestion)
warning: unused import: `tokio::fs`
   --> crates\crucible-core\src\hashing\file_hasher.rs:300:9
    |
300 |     use tokio::fs;
    |         ^^^^^^^^^
    |
    = note: `#[warn(unused_imports)]` on by default

warning: unused import: `std::collections::HashMap`
   --> crates\crucible-core\src\hashing\sha256.rs:129:9
    |
129 |     use std::collections::HashMap;
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused variable: `block`
    --> crates\crucible-core\src\hashing\block_hasher.rs:1522:23
     |
1522 |             .map(|(i, block)| {
     |                       ^^^^^ help: if this is intentional, prefix it with an 
underscore: `_block`
     |
     = note: `#[warn(unused_variables)]` on by default

warning: unused variable: `i`
    --> crates\crucible-core\src\hashing\block_hasher.rs:1676:14
     |
1676 |         for (i, (hashed_block, original_block)) in
     |              ^ help: if this is intentional, prefix it with an underscore: `_i`

warning: unused variable: `block`
    --> crates\crucible-core\src\hashing\block_hasher.rs:1823:17
     |
1823 |         for (i, block) in blocks.iter().enumerate() {
     |                 ^^^^^ help: if this is intentional, prefix it with an underscore: 
`_block`

warning: unused variable: `is_valid`
    --> crates\crucible-core\src\hashing\block_hasher.rs:1824:17
     |
1824 |             let is_valid = hasher
     |                 ^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_is_valid`

warning: unused variable: `coordinator`
    --> crates\crucible-core\src\parser\coordinator.rs:1086:13
     |
1086 |         let coordinator = factory::create_coordinator_with_config(
     |             ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_coordinator`

warning: unused variable: `storage_builder`
   --> crates\crucible-core\src\parser\storage_bridge.rs:274:9
    |
274 |         storage_builder: &ContentAddressedStorageBuilder,
    |         ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_storage_builder`

warning: unused variable: `now`
    --> crates\crucible-core\src\storage\eav_graph_traits.rs:1425:13
     |
1425 |         let now = Utc::now();
     |             ^^^ help: if this is intentional, prefix it with an underscore: `_now`

warning: unused variable: `hasher`
   --> crates\crucible-core\src\storage\merkle.rs:779:13
    |
779 |         let hasher = MockHasher::new();
    |             ^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_hasher`

warning: unused variable: `hasher`
    --> crates\crucible-core\src\storage\merkle.rs:1102:13
     |
1102 |         let hasher = MockHasher::new();
     |             ^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_hasher`

warning: unused variable: `blocks2`
    --> crates\crucible-core\src\storage\merkle.rs:1156:13
     |
1156 |         let blocks2: Vec<HashedBlock> = vec![]; // Empty
     |             ^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_blocks2`

warning: field `name` is never read
   --> crates\crucible-core\src\storage\builder.rs:561:9
    |
560 |     struct MockStorageBackend {
    |            ------------------ field in this struct
561 |         name: String,
    |         ^^^^
    |
    = note: `MockStorageBackend` has a derived impl for the trait `Debug`, but this is 
intentionally ignored during dead code analysis
    = note: `#[warn(dead_code)]` on by default

warning: comparison is useless due to type limits
  --> crates\crucible-core\src\crdt.rs:51:17
   |
51 |         assert!(manager.get_document().client_id() >= 0);
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_comparisons)]` on by default

warning: comparison is useless due to type limits
  --> crates\crucible-core\src\crdt.rs:57:17
   |
57 |         assert!(manager.get_document().client_id() >= 0);
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: comparison is useless due to type limits
    --> crates\crucible-core\src\storage\memory.rs:1447:17
     |
1447 |         assert!(evicted_count >= 0);
     |                 ^^^^^^^^^^^^^^^^^^

warning: unused variable: `change_detector`
   --> crates\crucible-pipeline\tests\pipeline_integration_tests.rs:433:20
    |
433 |     let (pipeline, change_detector, _merkle_store, enrichment_service, storage) =
    |                    ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an 
underscore: `_change_detector`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: unused variable: `change_detector`
   --> crates\crucible-pipeline\tests\pipeline_integration_tests.rs:478:20
    |
478 |     let (pipeline, change_detector, _merkle_store, enrichment_service, storage) =
    |                    ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an 
underscore: `_change_detector`

warning: unused variable: `merkle_store`
   --> crates\crucible-pipeline\tests\pipeline_integration_tests.rs:655:38
    |
655 |     let (pipeline, _change_detector, merkle_store, enrichment_service, storage) =
    |                                      ^^^^^^^^^^^^ help: if this is intentional, prefix 
it with an underscore: `_merkle_store`

warning: unused variable: `storage`
   --> crates\crucible-pipeline\tests\pipeline_integration_tests.rs:655:72
    |
655 |     let (pipeline, _change_detector, merkle_store, enrichment_service, storage) =
    |                                                                        ^^^^^^^ help: 
if this is intentional, prefix it with an underscore: `_storage`

warning: unused variable: `storage`
   --> crates\crucible-pipeline\tests\pipeline_integration_tests.rs:696:72
    |
696 |     let (pipeline, _change_detector, merkle_store, enrichment_service, storage) =
    |                                                                        ^^^^^^^ help: 
if this is intentional, prefix it with an underscore: `_storage`

warning: unused variable: `initial_enrich_count`
   --> crates\crucible-pipeline\tests\pipeline_integration_tests.rs:711:9
    |
711 |     let initial_enrich_count = enrichment_service.enrich_with_tree_count();
    |         ^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an 
underscore: `_initial_enrich_count`

warning: methods `set_simulate_errors`, `add_file_state`, and `clear` are never used
  --> crates\crucible-pipeline\tests\pipeline_integration_tests.rs:46:8
   |
35 | impl MockChangeDetectionStore {
   | ----------------------------- methods in this implementation
...
46 |     fn set_simulate_errors(&self, enabled: bool, message: &str) {
   |        ^^^^^^^^^^^^^^^^^^^
...
52 |     fn add_file_state(&self, path: &str, file_state: FileState) {
   |        ^^^^^^^^^^^^^^
...
57 |     fn clear(&self) {
   |        ^^^^^
   |
   = note: `#[warn(dead_code)]` on by default

warning: methods `set_simulate_errors`, `add_tree`, and `clear` are never used
   --> crates\crucible-pipeline\tests\pipeline_integration_tests.rs:138:8
    |
127 | impl MockMerkleStore {
    | -------------------- methods in this implementation
...
138 |     fn set_simulate_errors(&self, enabled: bool, message: &str) {
    |        ^^^^^^^^^^^^^^^^^^^
...
144 |     fn add_tree(&self, id: &str, tree: HybridMerkleTree) {
    |        ^^^^^^^^
...
149 |     fn clear(&self) {
    |        ^^^^^

warning: method `clear` is never used
   --> crates\crucible-pipeline\tests\pipeline_integration_tests.rs:268:8
    |
242 | impl MockEnrichedNoteStore {
    | -------------------------- method in this implementation
...
268 |     fn clear(&self) {
    |        ^^^^^

warning: unused import: `super::*`
   --> crates\crucible-pipeline\src\note_pipeline.rs:393:9
    |
393 |     use super::*;
    |         ^^^^^^^^
    |
    = note: `#[warn(unused_imports)]` on by default

warning: unused import: `tempfile::NamedTempFile`
   --> crates\crucible-pipeline\src\note_pipeline.rs:397:9
    |
397 |     use tempfile::NamedTempFile;
    |         ^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::io::Write`
   --> crates\crucible-pipeline\src\note_pipeline.rs:398:9
    |
398 |     use std::io::Write;
    |         ^^^^^^^^^^^^^^

warning: unused variable: `change_detector`
   --> crates\crucible-pipeline\src\note_pipeline.rs:404:13
    |
404 |         let change_detector = Arc::new(InMemoryChangeDetectionStore::new());
    |             ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an 
underscore: `_change_detector`

warning: unused variable: `merkle_store`
   --> crates\crucible-pipeline\src\note_pipeline.rs:405:13
    |
405 |         let merkle_store = Arc::new(InMemoryMerkleStore::new());
    |             ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_merkle_store`

warning: `crucible-core` (lib test) generated 16 warnings (run `cargo fix --lib -p 
crucible-core --tests` to apply 2 suggestions)
warning: `crucible-pipeline` (test "pipeline_integration_tests") generated 9 warnings
warning: `crucible-pipeline` (lib test) generated 6 warnings (1 duplicate) (run `cargo fix 
--lib -p crucible-pipeline --tests` to apply 3 suggestions)
warning: unused variable: `parsed`
   --> crates\crucible-parser\tests\wikilink_edge_cases.rs:131:9
    |
131 |     let parsed = parse_note(content, "test.md").await.unwrap();
    |         ^^^^^^ help: if this is intentional, prefix it with an underscore: `_parsed`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: `crucible-parser` (test "wikilink_edge_cases") generated 1 warning
warning: unused import: `crucible_parser::types::ParsedNote`
 --> crates\crucible-parser\tests\heading_hierarchy.rs:7:5
  |
7 | use crucible_parser::types::ParsedNote;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

warning: unused import: `PathBuf`
 --> crates\crucible-parser\tests\heading_hierarchy.rs:8:23
  |
8 | use std::path::{Path, PathBuf};
  |                       ^^^^^^^

warning: unused import: `ListType`
   --> crates\crucible-parser\src\block_hasher.rs:228:38
    |
228 |     use crate::types::{ASTBlockType, ListType};
    |                                      ^^^^^^^^
    |
    = note: `#[warn(unused_imports)]` on by default

warning: unused variable: `errors`
   --> crates\crucible-parser\src\enhanced_tags.rs:611:13
    |
611 |         let errors = extension.parse(content, &mut doc_content).await;
    |             ^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_errors`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: `crucible-parser` (test "heading_hierarchy") generated 2 warnings (run `cargo fix 
--test "heading_hierarchy"` to apply 2 suggestions)
warning: `crucible-parser` (lib test) generated 2 warnings (run `cargo fix --lib -p 
crucible-parser --tests` to apply 1 suggestion)
warning: variable does not need to be mutable
   --> crates\crucible-merkle\src\thread_safe.rs:411:13
    |
411 |         let mut guard = tree.write();
    |             ----^^^^^
    |             |
    |             help: remove this `mut`
    |
    = note: `#[warn(unused_mut)]` on by default

warning: `crucible-merkle` (lib test) generated 1 warning (run `cargo fix --lib -p 
crucible-merkle --tests` to apply 1 suggestion)
error[E0560]: struct `SurrealDbConfig` has no field named `address`
  --> crates\crucible-surrealdb\tests\merkle_integration_tests.rs:19:9
   |
19 |         address: "memory".to_string(),
   |         ^^^^^^^ `SurrealDbConfig` does not have this field
   |
   = note: available fields are: `path`, `max_connections`, `timeout_seconds`

error[E0560]: struct `SurrealDbConfig` has no field named `username`
  --> crates\crucible-surrealdb\tests\merkle_integration_tests.rs:22:9
   |
22 |         username: "root".to_string(),
   |         ^^^^^^^^ `SurrealDbConfig` does not have this field
   |
   = note: available fields are: `path`, `max_connections`, `timeout_seconds`

error[E0560]: struct `SurrealDbConfig` has no field named `password`
  --> crates\crucible-surrealdb\tests\merkle_integration_tests.rs:23:9
   |
23 |         password: "root".to_string(),
   |         ^^^^^^^^ `SurrealDbConfig` does not have this field
   |
   = note: available fields are: `path`, `max_connections`, `timeout_seconds`

error[E0308]: mismatched types
  --> crates\crucible-surrealdb\tests\merkle_integration_tests.rs:61:40
   |
61 |         offset += heading_text.len() + level + 2; // Account for # markers and newline
   |                                        ^^^^^ expected `usize`, found `u8`

error[E0277]: cannot add `u8` to `usize`
  --> crates\crucible-surrealdb\tests\merkle_integration_tests.rs:61:38
   |
61 |         offset += heading_text.len() + level + 2; // Account for # markers and newline
   |                                      ^ no implementation for `usize + u8`
   |
   = help: the trait `Add<u8>` is not implemented for `usize`
   = help: the following other types implement trait `Add<Rhs>`:
             `&usize` implements `Add<&num_bigint::bigint::BigInt>`
             `&usize` implements `Add<&num_bigint::biguint::BigUint>`
             `&usize` implements `Add<&num_complex::Complex<usize>>`
             `&usize` implements `Add<num_bigint::bigint::BigInt>`
             `&usize` implements `Add<num_bigint::biguint::BigUint>`
             `&usize` implements `Add<num_complex::Complex<usize>>`
             `&usize` implements `Add<usize>`
             `&usize` implements `Add`
           and 14 others

warning: unused import: `std::collections::HashMap`
   --> crates\crucible-tools\src\kiln_tools.rs:345:13
    |
345 |         use std::collections::HashMap;
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = note: `#[warn(unused_imports)]` on by default

error[E0432]: unresolved imports `crucible_surrealdb::create_kiln_scanner_with_embeddings`, 
`crucible_surrealdb::EmbeddingConfig`, `crucible_surrealdb::EmbeddingThreadPool`, 
`crucible_surrealdb::KilnScannerConfig`
 --> crates\crucible-surrealdb\examples\hash_lookup_demo.rs:8:5
  |
8 |     create_kiln_scanner_with_embeddings, lookup_file_hash, lookup_file_hashes_batch,
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ no `create_kiln_scanner_with_embeddings` in the 
root
9 |     BatchLookupConfig, EmbeddingConfig, EmbeddingThreadPool, HashLookupCache, 
KilnScannerConfig,
  |                        ^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^                   
^^^^^^^^^^^^^^^^^ no `KilnScannerConfig` in the root
  |                        |                |
  |                        |                no `EmbeddingThreadPool` in the root
  |                        no `EmbeddingConfig` in the root
  |
  = help: consider importing this enum instead:
          crucible_llm::EmbeddingConfig

error[E0433]: failed to resolve: could not find `ChangeDetectionMethod` in 
`crucible_surrealdb`
  --> crates\crucible-surrealdb\examples\hash_lookup_demo.rs:42:58
   |
42 |     config.change_detection_method = 
crucible_surrealdb::ChangeDetectionMethod::ContentHash;
   |                                                          ^^^^^^^^^^^^^^^^^^^^^ could 
not find `ChangeDetectionMethod` in `crucible_surrealdb`

warning: unused import: `HashLookupCache`
 --> crates\crucible-surrealdb\examples\hash_lookup_demo.rs:9:62
  |
9 |     BatchLookupConfig, EmbeddingConfig, EmbeddingThreadPool, HashLookupCache, 
KilnScannerConfig,
  |                                                              ^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

error[E0308]: mismatched types
   --> crates\crucible-surrealdb\tests\merkle_integration_tests.rs:261:66
    |
261 |     let tree = HybridMerkleTree::from_document_with_config(&doc, config);
    |                -------------------------------------------       ^^^^^^ expected 
`&VirtualizationConfig`, found `VirtualizationConfig`
    |                |
    |                arguments to this function are incorrect
    |
note: associated function defined here
   --> C:\Users\Matthew\Documents\crucible\crates\crucible-merkle\src\hybrid.rs:109:12
    |
109 |     pub fn from_document_with_config(doc: &ParsedNote, config: &VirtualizationConfig) 
-> Self {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^
help: consider borrowing here
    |
261 |     let tree = HybridMerkleTree::from_document_with_config(&doc, &config);
    |                                                                  +

warning: use of deprecated associated function 
`crucible_surrealdb::eav_graph::NoteIngestor::<'a>::with_merkle_persistence`: Use 
`with_merkle_store` instead for better abstraction
   --> crates\crucible-surrealdb\tests\merkle_integration_tests.rs:347:34
    |
347 |     let ingestor = NoteIngestor::with_merkle_persistence(&store, persistence.clone());
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^
    |
    = note: `#[warn(deprecated)]` on by default

Some errors have detailed explanations: E0432, E0433.
For more information about an error, try `rustc --explain E0432`.
warning: `crucible-surrealdb` (example "hash_lookup_demo") generated 1 warning
error: could not compile `crucible-surrealdb` (example "hash_lookup_demo") due to 2 previous 
errors; 1 warning emitted
warning: build failed, waiting for other jobs to finish...
Some errors have detailed explanations: E0277, E0308, E0560.
For more information about an error, try `rustc --explain E0277`.
warning: `crucible-surrealdb` (test "merkle_integration_tests") generated 1 warning
error: could not compile `crucible-surrealdb` (test "merkle_integration_tests") due to 6 
previous errors; 1 warning emitted
warning: unused import: `super::*`
   --> crates\crucible-cli\src\acp\context.rs:145:9
    |
145 |     use super::*;
    |         ^^^^^^^^

warning: unused import: `super::super::*`
   --> crates\crucible-cli\src\acp\tests.rs:117:9
    |
117 |     use super::super::*;
    |         ^^^^^^^^^^^^^^^

error[E0308]: mismatched types
   --> crates\crucible-watch\src\backends\notify_backend.rs:75:31
    |
 75 |         self.debouncer = Some(debouncer);
    |                          ---- ^^^^^^^^^ expected `NoCache`, found `FileIdMap`
    |                          |
    |                          arguments to this enum variant are incorrect
    |
    = note: expected struct `notify_debouncer_full::Debouncer<_, NoCache>`
               found struct `notify_debouncer_full::Debouncer<_, FileIdMap>`
help: the type constructed contains 
`notify_debouncer_full::Debouncer<notify::ReadDirectoryChangesWatcher, FileIdMap>` due to 
the type of the argument passed
   --> crates\crucible-watch\src\backends\notify_backend.rs:75:26
    |
 75 |         self.debouncer = Some(debouncer);
    |                          ^^^^^---------^
    |                               |
    |                               this argument influences the type of `Some`
note: tuple variant defined here
   --> C:\Users\Matthew\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib/rustlib/src/rust
\library\core\src\option.rs:601:5
    |
601 |     Some(#[stable(feature = "rust1", since = "1.0.0")] T),
    |     ^^^^

warning: unused variable: `warnings`
   --> crates\crucible-watch\src\file_scanner.rs:515:13
    |
515 |         let warnings = if cfg!(target_os = "windows") {
    |             ^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_warnings`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: unused variable: `batch_id`
   --> crates\crucible-watch\src\message_channel_infrastructure.rs:319:25
    |
319 |             if let Some(batch_id) = batch_id {
    |                         ^^^^^^^^ help: if this is intentional, prefix it with an 
underscore: `_batch_id`

error[E0658]: use of unstable library feature `windows_by_handle`
   --> crates\crucible-watch\src\backends\editor_backend.rs:366:26
    |
366 |                 metadata.file_index()
    |                          ^^^^^^^^^^
    |
    = note: see issue #63010 <https://github.com/rust-lang/rust/issues/63010> for more 
information

error[E0308]: mismatched types
   --> crates\crucible-watch\src\types.rs:296:41
    |
296 |                 self.permissions = Some(FilePermissions::Writable);
    |                                    ---- ^^^^^^^^^^^^^^^^^^^^^^^^^ expected 
`FilePermissions`, found enum constructor
    |                                    |
    |                                    arguments to this enum variant are incorrect
...
650 |     Writable(u32),
    |     -------- `Writable` defines an enum variant constructor here, which should be 
called
    |
    = note:          expected enum `FilePermissions`
            found enum constructor `fn(u32) -> FilePermissions {FilePermissions::Writable}`
help: the type constructed contains `fn(u32) -> FilePermissions {FilePermissions::Writable}` 
due to the type of the argument passed
   --> crates\crucible-watch\src\types.rs:296:36
    |
296 |                 self.permissions = Some(FilePermissions::Writable);
    |                                    ^^^^^-------------------------^
    |                                         |
    |                                         this argument influences the type of `Some`
note: tuple variant defined here
   --> C:\Users\Matthew\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib/rustlib/src/rust
\library\core\src\option.rs:601:5
    |
601 |     Some(#[stable(feature = "rust1", since = "1.0.0")] T),
    |     ^^^^
help: use parentheses to construct this tuple variant
    |
296 |                 self.permissions = Some(FilePermissions::Writable(/* u32 */));
    |                                                                  +++++++++++

warning: unused variable: `path`
   --> crates\crucible-watch\src\backends\editor_backend.rs:183:30
    |
183 |     fn get_file_inode(&self, path: &PathBuf) -> Result<Option<u64>> {
    |                              ^^^^ help: if this is intentional, prefix it with an 
underscore: `_path`

warning: unused variable: `client`
   --> crates\crucible-cli\src\acp\tests.rs:140:13
    |
140 |         let client = CrucibleAcpClient::new(agent, true);
    |             ^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_client`

warning: unused variable: `client_readonly`
   --> crates\crucible-cli\src\acp\tests.rs:152:13
    |
152 |         let client_readonly = CrucibleAcpClient::new(agent.clone(), true);
    |             ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an 
underscore: `_client_readonly`

warning: unused variable: `client_write`
   --> crates\crucible-cli\src\acp\tests.rs:153:13
    |
153 |         let client_write = CrucibleAcpClient::new(agent, false);
    |             ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: 
`_client_write`

warning: unused variable: `stored_hash`
   --> crates\crucible-watch\src\change_detector.rs:570:22
    |
570 |                 Some(stored_hash) => {
    |                      ^^^^^^^^^^^ help: if this is intentional, prefix it with an 
underscore: `_stored_hash`

warning: unused variable: `style`
   --> crates\crucible-cli\src\commands\repl\highlighter.rs:389:45
    |
389 |         let has_string = parts.iter().any(|(style, text)| text.contains("'test'"));
    |                                             ^^^^^ help: if this is intentional, prefix 
it with an underscore: `_style`

warning: unused variable: `path`
   --> crates\crucible-cli\src\commands\secure_filesystem.rs:458:40
    |
458 |     fn is_absolute_path_allowed(&self, path: &Path) -> bool {
    |                                        ^^^^ help: if this is intentional, prefix it 
with an underscore: `_path`

warning: unused variable: `by_backend`
   --> crates\crucible-cli\src\commands\storage.rs:430:45
    |
430 | fn output_stats_table(stats: &StorageStats, by_backend: bool, deduplication: bool) -> 
Result<()> {
    |                                             ^^^^^^^^^^ help: if this is intentional, 
prefix it with an underscore: `_by_backend`

warning: unused variable: `deduplication`
   --> crates\crucible-cli\src\commands\storage.rs:430:63
    |
430 | fn output_stats_table(stats: &StorageStats, by_backend: bool, deduplication: bool) -> 
Result<()> {
    |                                                               ^^^^^^^^^^^^^ help: if 
this is intentional, prefix it with an underscore: `_deduplication`

Some errors have detailed explanations: E0308, E0658.
For more information about an error, try `rustc --explain E0308`.
warning: `crucible-watch` (lib test) generated 4 warnings
error: could not compile `crucible-watch` (lib test) due to 3 previous errors; 4 warnings 
emitted
warning: `crucible-watch` (lib) generated 4 warnings (4 duplicates)
error: could not compile `crucible-watch` (lib) due to 3 previous errors; 4 warnings emitted
warning: `crucible-tools` (lib test) generated 1 warning (run `cargo fix --lib -p 
crucible-tools --tests` to apply 1 suggestion)
warning: `crucible-cli` (lib test) generated 30 warnings (21 duplicates) (run `cargo fix 
--lib -p crucible-cli --tests` to apply 2 suggestions)
