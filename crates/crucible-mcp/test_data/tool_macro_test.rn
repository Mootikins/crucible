/// Test file for #[tool] attribute macro system

#[tool(desc: "Create a new markdown note")]
pub async fn create_note(title: string, content: string, folder?: string) {
    #{
        success: true,
        path: `/notes/${title}.md`,
        folder: folder ?? ""
    }
}

#[tool(desc: "Search notes by query with optional limit")]
pub async fn search_notes(query: string, limit?: number, tags?: [string]) {
    #{
        results: ["note1.md", "note2.md", "note3.md"],
        query: query,
        limit: limit ?? 10
    }
}

#[tool(desc: "Get statistics about the vault")]
pub async fn get_stats() {
    #{
        total_notes: 42,
        indexed: 38,
        cached: 15
    }
}

#[tool(desc: "Update note with complex parameters")]
pub async fn update_note(
    path: string,
    content: string,
    properties?: object,
    tags?: [string],
    force?: bool
) {
    #{
        success: true,
        path: path,
        updated: true,
        properties: properties ?? {},
        tags: tags ?? [],
        force: force ?? false
    }
}

#[tool(desc: "Delete note by path")]
pub async fn delete_note(path: string) {
    #{
        success: true,
        deleted_path: path
    }
}

// Tool without macro (fallback test)
pub async fn old_style_tool(args) {
    #{ success: true }
}

// Function without async (should still work)
#[tool(desc: "Simple utility function")]
pub fn get_version() {
    #{ version: "1.0.0" }
}