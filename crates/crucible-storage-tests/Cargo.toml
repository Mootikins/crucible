[package]
name = "crucible-storage-tests"
version.workspace = true
authors.workspace = true
license.workspace = true
edition.workspace = true
publish = false  # Test-only crate, not published

[dependencies]
# Core traits
crucible-core = { path = "../crucible-core" }

# Backend implementations (feature-gated)
crucible-sqlite = { path = "../crucible-sqlite", optional = true }
crucible-surrealdb = { path = "../crucible-surrealdb", optional = true, features = ["test-utils"] }
crucible-lance = { path = "../crucible-lance", optional = true }

# Test dependencies
tokio = { workspace = true, features = ["test-util", "full"] }
chrono = { workspace = true }
serde_json = { workspace = true }
tempfile = { workspace = true }

[features]
default = []
# Run contract tests against SQLite
sqlite = ["dep:crucible-sqlite"]
# Run contract tests against SurrealDB
surrealdb = ["dep:crucible-surrealdb"]
# Run contract tests against LanceDB
lance = ["dep:crucible-lance"]

[lib]
# This crate is only for tests - no library code
path = "src/lib.rs"

[[test]]
name = "eav_contract"
path = "tests/eav_contract.rs"
required-features = []  # Tests have their own cfg guards

[[test]]
name = "note_store_contract"
path = "tests/note_store_contract.rs"
required-features = []  # Tests have their own cfg guards
