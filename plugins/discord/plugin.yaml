name: discord
version: "0.2.0"
description: Discord integration via Gateway WebSocket and REST API
author: Crucible Team
license: MIT

main: init.lua

capabilities:
  - config
  - network
  - websocket
  - agent

config:
  properties:
    bot_token:
      type: string
      description: Discord bot token (from https://discord.com/developers)
      default: ""
    intents:
      type: number
      description: Gateway intents bitmask (default 37889 = GUILDS | GUILD_MESSAGES | DIRECT_MESSAGES | MESSAGE_CONTENT)
      default: 37889
    auto_connect:
      type: boolean
      description: Automatically connect to gateway on plugin load
      default: false
    command_prefix:
      type: string
      description: Prefix for text commands (empty = slash commands only)
      default: ""
    app_id:
      type: string
      description: Discord application ID (enables slash commands)
      default: ""
    respond_to:
      type: string
      description: When to respond to messages
      default: "mentions"
      enum: ["mentions", "prefix", "both", "all"]
    digest_interval:
      type: number
      description: Seconds between digest sends (0 = disabled)
      default: 0
    digest_channels:
      type: array
      description: Channel IDs to deliver digest embeds to
      default: []

exports:
  auto_discover: true
