# Crucible Configuration
# Location: ~/.config/crucible/config.toml
#
# This is the main configuration file for Crucible. You can split large
# sections into separate files using [include].

# =============================================================================
# File References - Load configuration from external files
# =============================================================================
# Use {file:path} anywhere to include external content.
# Paths are relative to this file's directory, or use absolute/~ paths.
#
# Examples:
#   gateway = "{file:mcps.toml}"           # Include whole section from TOML
#   api_key = "{file:~/.secrets/key.txt}"  # Include secret as string
#
# You can also use the [include] section for top-level merging:
#   [include]
#   gateway = "mcps.toml"

# Include MCP server configurations from separate file
gateway = "{file:mcps.toml}"

# Uncomment to use external files for other sections:
# discovery = "{file:discovery.toml}"
# hooks = "{file:hooks.toml}"
# embedding = "{file:embedding.toml}"

# =============================================================================
# Kiln Configuration
# =============================================================================

# Path to your Obsidian vault / knowledge base
# Can also be set via CRUCIBLE_KILN_PATH environment variable
kiln_path = "~/Documents/my-kiln"

# Additional directories to search for agent cards
# agent_directories = ["/home/user/shared-agents", "./local-agents"]

# =============================================================================
# Embedding Configuration
# =============================================================================

[embedding]
# Provider options: fastembed, ollama, openai, anthropic, cohere, custom
provider = "ollama"

# Model name (provider-specific)
model = "nomic-embed-text"

# API URL (for ollama, openai, etc.)
api_url = "http://localhost:11434"

# Batch size for embedding operations
batch_size = 50

# Maximum concurrent embedding jobs
# max_concurrent = 4

# =============================================================================
# ACP (Agent Client Protocol) Configuration
# =============================================================================

[acp]
# Default agent to use for chat sessions
# Options: claude, opencode, or path to custom agent
# default_agent = "claude"

# Enable automatic agent discovery
enable_discovery = true

# Session timeout in minutes
session_timeout_minutes = 30

# Maximum message size in MB
max_message_size_mb = 25

# =============================================================================
# Chat Configuration
# =============================================================================

[chat]
# Default chat model (for non-ACP chat)
# model = "llama3.2"

# Enable markdown rendering in terminal
enable_markdown = true

# =============================================================================
# CLI Configuration
# =============================================================================

[cli]
# Show progress bars for long operations
show_progress = true

# Require confirmation for destructive operations
confirm_destructive = true

# Verbose output by default
verbose = false

# =============================================================================
# Logging Configuration (optional)
# =============================================================================
# Uncomment to configure logging

# [logging]
# level = "info"  # off, error, warn, info, debug, trace
# format = "text"  # text, json, compact
# console = true
# file = false
# file_path = "~/.local/share/crucible/crucible.log"

# =============================================================================
# Processing Configuration (optional)
# =============================================================================

# [processing]
# parallel_workers = 4  # Number of parallel workers (default: num_cpus / 2)

# =============================================================================
# Discovery Paths (optional - can also be in discovery.toml)
# =============================================================================
# Configure where to find Rune tools, hooks, and event handlers

# [discovery.type_configs.tools]
# additional_paths = ["/opt/crucible/tools", "~/.local/share/crucible/tools"]
# use_defaults = true  # Also search default locations

# [discovery.type_configs.hooks]
# additional_paths = []
# use_defaults = true

# [discovery.type_configs.events]
# additional_paths = []
# use_defaults = true

# =============================================================================
# Hooks Configuration (optional - can also be in hooks.toml)
# =============================================================================
# Configure built-in hooks for tool filtering, output transformation, etc.

# [hooks.builtin.test_filter]
# enabled = true
# pattern = "just_test*"
# priority = 10

# [hooks.builtin.tool_selector]
# enabled = false
# allowed_tools = ["search_*", "read_*", "list_*"]
